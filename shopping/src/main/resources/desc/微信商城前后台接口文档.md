<!--
 * @Author: your name
 * @Date: 2021-12-06 21:25:50
 * @LastEditTime: 2022-01-23 19:26:39
 * @LastEditors: Please set LastEditors
 * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
 * @FilePath: \微信商城相关文档\微信商城前后台接口文档.md
-->
# 微信小程序前后台文档


## 后台请求路径
- 后台请求ip&port  
  http://wxshop.xxx.com:8801
- 路径规范
  - <font color="3DFF92">/api</font>：api
    - <font color="3DFF92">/pub</font>：无需验证
      - <font color="3DFF92">/v1</font>：版本
        - <font color="3DFF92">/adm</font>：管理端
        - <font color="3DFF92">/wxshop</font>：小程序端
        - <font color="3DFF92">/comm</font>：公共
    - <font color="3DFF92">/pri</font>：需要验证
      - <font color="3DFF92">/v1</font>：版本
        - <font color="3DFF92">/comm</font>：公共


## 接口规范
- 报文请求格式
  - 前后台请求报文格式为json
    - request
      ```json
      {
        "reqCode": "请求接口",
        "reqComm": {
          
        },
        "reqData": {
        
        } 
      }
      ```
      - <details> 
        <summary>字段说明</summary> 

        - <font color="ffff00"> ***reqCode*** </font> : 请求接口字段，eg: 01001001(登录获取首页多有相关信息接口)
        - <font color="ffff00"> ***reqComm*** </font> :请求携带的公共信息字段

          - 
        </details>
    - response
      ```json
      {
        "respCode": "返回码",
        "respMsg": "报文状态描述",
        "respComm": {
        },
        "respBody": { 
        }
      }
      ```
      - <details> 
        <summary>字段说明</summary> 

        - <font color="ffff00"> ***respCode*** </font> : 请求接口字段，eg: 01001001(登录获取首页多有相关信息接口)
        - <font color="ffff00"> ***respComm*** </font> :  

          - 请求携带的公共信息字段
        - <font color="ffff00"> ***respBody*** </font> : 请求的数据返回体
        </details>
- 接口格式说明
  - 接口一共8位，前2位标识为渠道，中间3位为模块标识，后3位为模块序号
    - <font color="ffff00">01001001</font>: 接口格式
    - 接口解析：
      - <font color="00ffff">01</font>: 微信小程序端接口
        - <font color="ffff00">001</font>: 小程序首页模块
        - <font color="ffff00">002</font>: 小程序分类页面模块
        - <font color="ffff00">003</font>: 小程序购物车页面模块
        - <font color="ffff00">004</font>: 小程序个人信息页面模块
      - <font color="00ffff">02</font>: 管理端接口
        - <font color="ffff00">001</font>: 用户模块
        - <font color="ffff00">002</font>: 商品模块
        - 
      - <font color="00ffff">03</font>: 公共接口
        - <font color="ffff00">001</font>: 用户模块 
        - <font color="ffff00">002</font>: 公共其他模块 
        

## 接口
- 前面带有 - 的是已经实现的接口
- 小程序端 - 01
  - 001 - 首页
    - [01001-001  登录获取首页多有相关信息接口](#01001001)
  - 002 - 分类页面
    - [01002-002  获取分类页面分类信息](#01002002)
    - [01002-003  查询分类下面商品](#01002003)
    - [01002-004  搜索按钮查询商品](#01002004) 
  - 003 - 购物车页面
    - [01003-001  获取购物车页面相关信息](#01003001)
  - 004 - 个人中心页面
    - [01004-001](#01003001)

- 管理端 - 02
  - 001 - 用户模块
  - 002 - 商品模块
    - [02002-001  添加商品接口](#02002001)
    - [- 02002-002  添加商品前相关信息查询接口](#02002002)
  - 003 - 其他信息模块
    - [- 02003-001  管理端登录后获取页面初始化信息](#02003001)
    - [02003-002  修改轮播图信息接口](#02003002)
    - [  ](#)
    
- 公共接口 - 03
  - 001 - 用户模块
    - [- 03001-001  用户登录接口](#03001001)
    - [03001-002  用户注册接口](#03001002)
  - 002 - 文件模块
    - [03002-001 文件上传接口](#03002001)
    - [03002-002 文件上传接口](#03002002)
    - [- 03002-003 文件删除接口](#03002003)
    -
  - 003 - 订单模块
    - [03003001 订单信息查询接口](#03003001)
***
***
### 小程序端 - 01
  - ***001 - 首页***
    - <a id="01001001"><font color="ffff00">01001001：获取首页初始化信息</font></a>  
      - <font color="00ffff">request</font>  
        ```json
        {
          "reqCode": "",
          "reqMsg": "",
          "reqComm": {
            // 公共返回体
          },
          "reqBody": {
          } 
        }
        ```
      - <details>

          <summary>测试报文</summary>
          ```json
          {
            "reqCode": "01001001",
            "reqMsg": "请求管理端页面初始化信息",
            "reqComm": {
            },
            "reqBody": {
  
            }
          }
          ```
      </details>
      - <font color="00ffff">response</font>
        ```json
        {
          "respCode": "",
          "respMsg": "",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
  
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>

            ```json
            {

            }
            ```
          </details>
  - ***002 - 分类页面***
  - ***003 - 购物车***  
  - ***004 - 个人中心页***

### 管理端 - 02
  - ***001 - 用户模块***
  - ***002 - 商品模块***
    - <a id="02002001"><font color="ffff00">02002001：添加商品接口</font></a>  
      - <font color="00ffff">request</font>
        ```json
        {
          "reqCode": "",
          "reqMsg": "",
          "reqComm": {
            // 公共返回体
          },
          "reqBody": {
  
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>  

            ```json
            {
            }
            ```
          </details>
    
      - <font color="00ffff">response</font>
        ```json
        {
          "respCode": "",
          "respMsg": "",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
  
          } 
        }
        ```
      - <details>
          <summary>测试报文</summary>

          ```json
          {

          }
          ```
        </details>
    - <a id="02002002"><font color="ffff00">02002002：添加商品前相关信息查询接口</font></a>  
      - <font color="00ffff">request</font>
        ```json
        {
          "reqCode": "02002002",
          "reqMsg": "",
          "reqComm": {
            // 公共返回体
          },
          "reqBody": {
            // 信息查询不需要数据
          } 
        }
        ```
        - <details>
          <summary>测试报文</summary>  

          ```json
          {
            "reqCode": "02002002",
            "reqMsg": "",
            "reqComm": {},
            "reqBody": {} 
          }
          ```
        </details>
  
      - <font color="00ffff">response</font>
        ```json
        {
            "respCode": "02002002",
            "respMsg": "",
            "respComm": {},
            "respBody": {
              "categories": [ // 类别数组
                {
                    "categoryId": "类别id",
                    "categoryName": "类别名称",
                    "categoryParentId": "父类别id",
                    "categoryDesc": "类别描述",
                    "spare1": "备用字段",
                    "spare2": "备用字段",
                    "spare3": "备用字段"
                }
              ],
              "brandInfos": [ // 品牌信息数组
                {
                    "brandId": "品牌id",
                    "brandName": "品牌名称",
                    "brandNameEng": "品牌英文名称",
                    "brandDesc": "品牌描述",
                    "fkCategoryId": "外键类别id",
                    "spare1": "备用字段",
                    "spare2": "备用字段",
                    "spare3": "备用字段"
                },
              ]
            } 
          }
        ```
        - <details>
          <summary>测试报文</summary>

          ```json
          {
            "respMsg": "交易成功",
            "respCode": "0000000",
            "respComm": null,
            "respBody": {
                "categories": [
                    {
                        "categoryId": 1000,
                        "categoryName": "手机",
                        "categoryParentId": 0,
                        "categoryDesc": "统一手机大类",
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "categoryId": 2000,
                        "categoryName": "电脑",
                        "categoryParentId": 0,
                        "categoryDesc": "电脑类别",
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "categoryId": 3000,
                        "categoryName": "男装",
                        "categoryParentId": 0,
                        "categoryDesc": "所有男性大类",
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "categoryId": 3001,
                        "categoryName": "男鞋",
                        "categoryParentId": 3000,
                        "categoryDesc": "男装下面男鞋",
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "categoryId": 4000,
                        "categoryName": "女装",
                        "categoryParentId": 0,
                        "categoryDesc": "所有女性服装大类",
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "categoryId": 4001,
                        "categoryName": "女鞋",
                        "categoryParentId": 4000,
                        "categoryDesc": "女装下面女鞋",
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "categoryId": 5000,
                        "categoryName": "美妆",
                        "categoryParentId": 0,
                        "categoryDesc": "化妆品等大类",
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "categoryId": 6000,
                        "categoryName": "房产",
                        "categoryParentId": 0,
                        "categoryDesc": "房子不动产",
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    }
                ],
                "brandInfos": [
                    {
                        "brandId": 10001,
                        "brandName": "阿迪达斯",
                        "brandNameEng": "Addias",
                        "brandDesc": "阿迪达斯品牌",
                        "fkCategoryId": 3000,
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "brandId": 10002,
                        "brandName": "测试1",
                        "brandNameEng": "test1",
                        "brandDesc": "测试品牌1",
                        "fkCategoryId": 1000,
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "brandId": 10003,
                        "brandName": "测试2",
                        "brandNameEng": "test2",
                        "brandDesc": "测试品牌2",
                        "fkCategoryId": 2000,
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "brandId": 10004,
                        "brandName": "测试3",
                        "brandNameEng": "test3",
                        "brandDesc": "测试品牌3",
                        "fkCategoryId": 3000,
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "brandId": 10005,
                        "brandName": "测试4",
                        "brandNameEng": "test4",
                        "brandDesc": "测试品牌4",
                        "fkCategoryId": 4000,
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "brandId": 10006,
                        "brandName": "测试5",
                        "brandNameEng": "test5",
                        "brandDesc": "测试品牌5",
                        "fkCategoryId": 5000,
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "brandId": 10007,
                        "brandName": "测试6",
                        "brandNameEng": "test6",
                        "brandDesc": "测试品牌6",
                        "fkCategoryId": 6000,
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "brandId": 10008,
                        "brandName": "测试7",
                        "brandNameEng": "test7",
                        "brandDesc": "测试品牌7",
                        "fkCategoryId": 1000,
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    },
                    {
                        "brandId": 10009,
                        "brandName": "测试8",
                        "brandNameEng": "test8",
                        "brandDesc": "测试品牌8",
                        "fkCategoryId": 2000,
                        "spare1": "",
                        "spare2": "",
                        "spare3": ""
                    }
                ]
            },
          }
          ```
          </details>
  - ***003 - 其他信息模块***
    - <a id="02003001"><font color="ffff00">02003001：管理端登陆后获取初始化信息</font></a>
      - <font color="00ffff">request</font>
        ```json
        {
          "reqCode": "02003001",
          "reqMsg": "获取管理端初始化信息",
          "reqComm": {
            // 公共返回体
          },
          "reqBody": {
            "username": "用户名", // 用于登录后获取菜单权限
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>
  
            ```json
            {
              "reqCode": "02003001",
              "reqMsg": "获取管理端初始化信息",
              "reqComm": {},
              "reqBody": {
                "username": "vincent",
              }
            }
            ```
          </details>
      - <font color="00ffff">response</font>
        ```json
        {
          "respCode": "返回状态码",
          "respMsg": "返回交易状态信息",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
            "menuInfo": [//左侧菜单列表
              { // 单个菜单数据
                "menuId": "菜单id",
                "menuName": "菜单名称",
                "menuIcon": "菜单icon路径"
                "childMenus": [
                  { //子菜单对象
                    "menuId": "子菜单id",
                    "menuName": "子菜单名称",
                    "menuRouter": "菜单router",
                    "menuIcon": "菜单icon路径"
                  }
                ]
              }
            ]
          }
        }
        ```
        - <details>
            <summary>测试报文</summary>
  
            ```json
            {
              "respCode": "",
              "respMsg": "",
              "respComm": {
                // 公共返回体
              },
              "respBody": {
                "menuInfo": [
                  { 
                    "menuId": "",
                    "menuName": "",
                    "childMenus": [
                      { 
                        "menuId": "",
                        "menuName": "",
                        "menuRouter": "",
                      }
                    ]
                  },
                  { 
                    "menuId": "",
                    "menuName": "",
                    "childMenus": [
                      { 
                        "menuId": "",
                        "menuName": "",
                        "menuRouter": "",
                      }
                    ]
                  }
                ]
              }
            }
            ```
          </details>
    - <a id="02003002"><font color="ffff00">02003002：修改首页轮播图信息接口</font></a>
      - <font color="00ffff">request</font>
        ```json
        {
          "reqCode": "",
          "reqMsg": "",
          "reqComm": {
            // 公共返回体
          },
          "reqBody": {
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>
            
            ```json
            {
            }
            ```
          </details>
      - <font color="00ffff">response</font>
        ```json
        {
          "respCode": "",
          "respMsg": "",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
  
          }
          
        }
        ```
        - <details>
            <summary>测试报文</summary>
  
            ```json
            {
              
            }
            ```
          </details>

### 公共接口 - 03
  - ***001 - 用户模块***
    - <a id="03001001"><font color="ffff00">03001001: 用户登录接口</font></a>  
      - <font color="00ffff">request</font>
        ```json
         {
          "reqCode": "接口",
          "reqMsg": "",
          "reqComm": {},
          "reqBody": {
            "username": "用户名",  
            "password": "用户密码"
          } 
        }
        ``` 
        - <details>
          <summary>测试报文</summary>

          ```json
          {
            
          }
          ```
          </details>
      - <font color="00ffff">response</font>  
        ```json
        {
          "respCode": "",
          "respMsg": "",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
            "verifyResult": "登录结果，1-成功，0-失败",
            "verifyMsg": "登录提示信息"
          }
        }
        ```
        - <details>
          <summary>测试报文</summary>

          ```json
          {
            "respCode": "",
            "respMsg": "",
            "respComm": {
            },
            "respBody": {
              "verifyResult": "1",
              "verifyMsg": "登录成功"
            }
          }
          ```
          </details>
    - <a id="03001002"><font color="ffff00">03001002: 用户注册接口</font></a>  
      - <font color="00ffff">request</font>
        ```json
         {
          "reqCode": "",
          "reqMsg": "", 
          "reqComm": {},
          "reqBody": {
            "userId": "用户id",
            "username": "用户名",
            "password": "用户密码", // 经过md5加密
            "userPhone": "用户手机号", // 可空
            "imgId": "头像图片id",     // 可空
            "fkRoleId": "用户角色类型(可参考角色表)",
          } 
        }
        ``` 
        - <details>
          <summary>测试报文</summary>

          ```json
          {
            "reqCode": "03001002",
            "reqMsg": "", 
            "reqComm": {},
            "reqBody": {
              "userId": "", 
              "username": "vincent",
              "password": "25d55ad283aa400af464c76d713c07ad",
              "userPhone": "", 
              "imgId": "",    
              "fkRoleId": "021"
            } 
          }
          ```
          </details>
      - <font color="00ffff">response</font>  
        ```json
        {
          "respCode": "",
          "respMsg": "",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
            "registResult": "注册结果,1-注册成功，0-注册失败",
            "registMsg": "注册提示信息"
          }
        }
        ```
        - <details>
          <summary>测试报文</summary>

          ```json
          {
            "respCode": "",
            "respMsg": "",
            "respComm": {
              // 公共返回体
            },
            "respBody": {
              "registResult": "1",
              "registMsg": "注册成功"
            }
          }
          ```
          </details>
  - ***002 - 公共其他模块***
    - <a id="03002001"><font color="ffff00">03002001：文件上传接口</font></a>
      - <font color="00ffff">request</font>
        文件上传采用表单直接上传，不存在post数据
        - <details>
            <summary>测试报文</summary>

            ```json
            {
            }
            ```
          </details>
      - <font color="00ffff">response</font>

        ```json
        {
          "respCode": "",
          "respMsg": "",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
            "fileIndexList": [
              {
                "fileId": "45位文件序号",
                "fileUrl": "文件存放路径"
              }
            ]
          }
          
        }
        ```
        - <details>
            <summary>测试报文</summary>

            ```json
            {
              "respCode": "",
              "respMsg": "",
              "respComm": {

              },
              "respBody": {
                "fileIndexList": [
                  {
                    "fileId": "45位文件id",
                    "fileUrl": "文件存放路径"
                  }
                ]
              }
              
            }
            ```
          </details>

    - <a id="03002002"><font color="ffff00">03002002：文件入库接口</font></a>
      - <font color="00ffff">request</font>
        ```json
        {
          "reqCode": "03002002",
          "reqComm": {
              // 公共请求体
          },
          "reqData": {
            "fileInfoList": [
              { 
                "fileId": "文件id",
                "fileUrl": "文件存放url",
                "fileSeq": "顺序号",
                "fileType": "文件类型",
                "isMain": "是否主图片"
              }
            ]            
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>

            ```json
            {
              "reqCode": "03002002",
              "reqComm": {
                  
              },
              "reqData": {
                "fileInfoList": [
                  { 
                    "fileId": "文件id",
                    "fileUrl": "文件存放url",
                    "fileSeq": "顺序号",
                    "fileType": "文件类型",
                    "isMain": "是否主图片"
                  }
                ]            
              } 
            }
            ```
          </details>
      - <font color="00ffff">response</font>
        ```json
          {
          "respCode": "0000",
          "respMsg": "", 
          "respComm": {
              
          },
          "respBody": {
            "saveResultList": [ // 文件保存结果数组
              {
                "fileId": "文件id",
                "saveResult": "保存结果"
              }
            ]           
          } 
        }
        ```  
        - <details>
            <summary>测试报文</summary>

            ```json
            {
              "respCode": "",
              "respMsg": "",
              "respComm": {

              },
              "respBody": {
                
              }
              
            }
            ```
          </details>
    - <a id="03002003"><font color="ffff00">03002003：文件删除接口</font></a>
      - <font color="00ffff">request</font>
        ```json
        {
          "reqCode": "03002003",
          "reqComm": {
            // 公共请求体
          },
          "reqData": {
            "deleteFileIndexList": [
              { 
                "fileId": "文件存放url",
                "fileSeq": "顺序号",
                "fileType": "文件类型",
                "isMain": "是否主图片"
              }
            ]            
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>

            ```json
            {
              "reqCode": "03002003",
              "reqComm": {
                // 公共返回体
              },
              "reqData": {
                "imgList": [
                  { 
                    "imgId": "id",
                    "imgUrl": "图片url",
                    "imgSeq": "顺序号",
                    "isMain": "是否主图片"
                  }
                ]            
              } 
            }
            ```
          </details>
      - <font color="00ffff">response</font>
        ```json
        {
          "respCode": "03002003",
          "respMsg": "", 
          "respComm": {
              
          },
          "respBody": {
            "deleteResultList": [
              { 
                "fileId": "文件id",
                "deleteResult": "文件删除结果，true-成功，false-失败"
              }
            ]
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>

            ```json
            {
              
            }
            ```
          </details>
    - <a id="03003001"><font color="ffff00">03003001：订单信息查询接口</font></a>
      - <font color="00ffff">request</font>
        ```json
        {
          "reqCode": "03003001",
          "reqComm": {
            // 公共请求体
          },
          "reqData": {
            "queryType": "查询方式，1-查询详情（订单号）， ",
            "orderNum": "查询方式为1必填，订单号",
            "" 

          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>

            ```json
            {
              "reqCode": "03003001",
              "reqComm": {
                // 公共返回体
              },
              "reqData": {

              } 
            }
            ```
          </details>
      - <font color="00ffff">response</font>
        ```json
        {
          "respCode": "03003001",
          "respMsg": "", 
          "respComm": {
              
          },
          "respBody": {
           
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>

            ```json
            {
              
            }
            ```
          </details>


          