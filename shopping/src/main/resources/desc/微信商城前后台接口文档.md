<!--
 * @Author: your name
 * @Date: 2021-12-06 21:25:50
 * @LastEditTime: 2022-01-03 11:52:28
 * @LastEditors: Please set LastEditors
 * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
 * @FilePath: \微信商城相关文档\微信商城前后台接口文档.md
-->
# 微信小程序前后台文档


## 后台请求路径
- 后台请求ip&port  
  http://wxshop.xxx.com:8801
- 路径规范
  - <font color="3DFF92">/api</font>：api
    - <font color="3DFF92">/pub</font>：无需验证
      - <font color="3DFF92">/v1</font>：版本
        - <font color="3DFF92">/adm</font>：管理端
        - <font color="3DFF92">/wxshop</font>：小程序端
        - <font color="3DFF92">/comm</font>：公共
    - <font color="3DFF92">/pri</font>：需要验证
      - <font color="3DFF92">/v1</font>：版本
        - <font color="3DFF92">/comm</font>：公共


## 接口规范
- 报文请求格式
  - 前后台请求报文格式为json
    - request
      ```json
      {
        "reqCode": "请求接口",
        "reqComm": {
          
        },
        "reqData": {
        
        } 
      }
      ```
      - <details> 
        <summary>字段说明</summary> 

        - <font color="ffff00"> ***reqCode*** </font> : 请求接口字段，eg: 01001001(登录获取首页多有相关信息接口)
        - <font color="ffff00"> ***reqComm*** </font> :请求携带的公共信息字段

          - 
        </details>
    - response
      ```json
      {
        "respCode": "返回码",
        "respMsg": "报文状态描述",
        "respComm": {
        },
        "respBody": { 
        }
      }
      ```
      - <details> 
        <summary>字段说明</summary> 

        - <font color="ffff00"> ***respCode*** </font> : 请求接口字段，eg: 01001001(登录获取首页多有相关信息接口)
        - <font color="ffff00"> ***respComm*** </font> :  

          - 请求携带的公共信息字段
        - <font color="ffff00"> ***respBody*** </font> : 请求的数据返回体
        </details>
- 接口格式说明
  - 接口一共8位，前2位标识为渠道，中间3位为模块标识，后3位为模块序号
    - <font color="ffff00">01001001</font>: 接口格式
    - 接口解析：
      - <font color="00ffff">01</font>: 微信小程序端接口
        - <font color="ffff00">001</font>: 小程序首页模块
        - <font color="ffff00">002</font>: 小程序分类页面模块
        - <font color="ffff00">003</font>: 小程序购物车页面模块
        - <font color="ffff00">004</font>: 小程序个人信息页面模块
      - <font color="00ffff">02</font>: 管理端接口
        - <font color="ffff00">001</font>: 用户模块
        - <font color="ffff00">002</font>: 商品模块
        - 
      - <font color="00ffff">03</font>: 公共接口
        - <font color="ffff00">001</font>: 用户模块 
        - <font color="ffff00">002</font>: 公共其他模块 
        

## 接口
- 前面带有 - 的是已经实现的接口
- 小程序端 - 01
  - 001 - 首页
    - [01001-001  登录获取首页多有相关信息接口](#01001001)
  - 002 - 分类页面
    - [01002-002  获取分类页面分类信息](#01002002)
    - [01002-003  查询分类下面商品](#01002003)
    - [01002-004  搜索按钮查询商品](#01002004) 
  - 003 - 购物车页面
    - [01003-001  获取购物车页面相关信息](#01003001)
  - 004 - 个人中心页面
    - [01004-001](#01003001)

- 管理端 - 02
  - 001 - 用户模块
  - 002 - 商品模块
    - [02002-001  添加商品接口](#02002001)
  - 003 - 其他信息模块
    - [- 02003-001  管理端登录后获取页面初始化信息](#02003001)
    - [02003-002  修改轮播图信息接口](#02003002)
    - [  ](#)
    -
- 公共接口 - 03
  - 001 - 用户模块
    - [03001-001  用户登录接口](#03001001)
  - 002 - 公共其他模块
    - [03002-001 文件上传接口](#03002001)
    - [03002-002 文件上传接口](#03002002)
    - [03002-003 文件删除接口](#03002003)
    -

***
***
### 小程序端 - 01
  - ***001 - 首页***
    - <a id="01001001"><font color="ffff00">01001001：获取首页初始化信息</font></a>  
      - <font color="00ffff">request</font>  
        ```json
        {
          "reqCode": "",
          "reqMsg": "",
          "reqComm": {
            // 公共返回体
          },
          "reqBody": {
  
          } 
        }
        ```
        - <details>

            <summary>测试报文</summary>
            ```json
            {
              "reqCode": "01001001",
              "reqMsg": "请求管理端页面初始化信息",
              "reqComm": {
              },
              "reqBody": {
    
              }
            }
            ```
        </details>
      - <font color="00ffff">response</font>
        ```json
        {
          "respCode": "",
          "respMsg": "",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
  
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>

            ```json
            {

            }
            ```
          </details>
  - ***002 - 分类页面***
  - ***003 - 购物车***  
  - ***004 - 个人中心页***

### 管理端 - 02
  - ***001 - 用户模块***
  - ***002 - 商品模块***
    - <a id="02002001"><font color="ffff00">02002001：添加商品接口</font></a>  
      - <font color="00ffff">request</font>
        ```json
        {
          "reqCode": "",
          "reqMsg": "",
          "reqComm": {
            // 公共返回体
          },
          "reqBody": {
  
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>  
  
            ```json
            {
            }
            ```
          </details>
  
      - <font color="00ffff">response</font>
        ```json
        {
          "respCode": "",
          "respMsg": "",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
  
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>
  
            ```json
            {
  
            }
            ```
          </details>
  - ***003 - 其他信息模块***
    - <a id="02003001"><font color="ffff00">02003001：管理端登陆后获取初始化信息</font></a>
      - <font color="00ffff">request</font>
        ```json
        {
          "reqCode": "02003001",
          "reqMsg": "获取管理端初始化信息",
          "reqComm": {
            // 公共返回体
          },
          "reqBody": {
  
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>
  
            ```json
            {
              "reqCode": "02003001",
              "reqMsg": "获取管理端初始化信息",
              "reqComm": {},
              "reqBody": {}
            }
            ```
          </details>
      - <font color="00ffff">response</font>
        ```json
        {
          "respCode": "返回状态码",
          "respMsg": "返回交易状态信息",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
            "menuInfo": [//左侧菜单列表
              { // 单个菜单数据
                "menuId": "菜单id",
                "menuName": "菜单名称",
                "childMenus": [
                  { //子菜单对象
                    "menuId": "子菜单id",
                    "menuName": "子菜单名称",
                    "menuRouter": "菜单router",
                  }
                ]
              }
            ]
          }
        }
        ```
        - <details>
            <summary>测试报文</summary>
  
            ```json
            {
              "respCode": "0000",
              "respMsg": "请求成功",
              "respComm": {},
              "respBody": {
                "manus": "左侧菜单列表"
              }
            }
            ```
          </details>
    - <a id="02002002"><font color="ffff00">02002002：修改首页轮播图信息接口</font></a>
      - <font color="00ffff">request</font>
        ```json
        {
          "reqCode": "",
          "reqMsg": "",
          "reqComm": {
            // 公共返回体
          },
          "reqBody": {
  
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>
            
            ```json
            {
            }
            ```
          </details>
      - <font color="00ffff">response</font>
        ```json
        {
          "respCode": "",
          "respMsg": "",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
  
          }
          
        }
        ```
        - <details>
            <summary>测试报文</summary>
  
            ```json
            {
              
            }
            ```
          </details>

### 公共接口 - 03
  - ***001 - 用户模块***
    - <a id="02001001"><font color="ffff00">03001001: 用户登录接口</font></a>  
      - <font color="00ffff">request</font>
        ```json
         {
          "reqCode": "",
          "reqMsg": "",
          "reqComm": {
            // 公共请求体
            "username": "用户名"  
          },
          "reqBody": {
            "username": "用户名",  
            "passwd": "用户密码"            
          } 
        }
        ``` 
        - <details>
          <summary>测试报文</summary>

          ```json
          {
            
          }
          ```
          </details>
      - <font color="00ffff">response</font>  
        ```json
        {
          "respCode": "",
          "respMsg": "",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
  
          }
          
        }
        ```
        - <details>
          <summary>测试报文</summary>

          ```json
          {
            
          }
          ```
          </details>
  - ***002 - 公共其他模块***
    - <a id="03002001"><font color="ffff00">03002001：文件上传接口</font></a>
      - <font color="00ffff">request</font>
        文件上传采用表单直接上传，不存在post数据
        - <details>
            <summary>测试报文</summary>

            ```json
            {
            }
            ```
          </details>
      - <font color="00ffff">response</font>

        ```json
        {
          "respCode": "",
          "respMsg": "",
          "respComm": {
            // 公共返回体
          },
          "respBody": {
            "fileIndexList": [
              {
                "fileId": "45位文件序号",
                "fileUrl": "文件存放路径"
              }
            ]
          }
          
        }
        ```
        - <details>
            <summary>测试报文</summary>

            ```json
            {
              "respCode": "",
              "respMsg": "",
              "respComm": {

              },
              "respBody": {
                "fileIndexList": [
                  {
                    "fileId": "45位文件id",
                    "fileUrl": "文件存放路径"
                  }
                ]
              }
              
            }
            ```
          </details>

    - <a id="03002002"><font color="ffff00">03002002：文件入库接口</font></a>
      - <font color="00ffff">request</font>
        ```json
        {
          "reqCode": "03002002",
          "reqComm": {
              // 公共请求体
          },
          "reqData": {
            "fileInfoList": [
              { 
                "fileId": "文件id",
                "fileUrl": "文件存放url",
                "fileSeq": "顺序号",
                "fileType": "文件类型",
                "isMain": "是否主图片"
              }
            ]            
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>

            ```json
            {
              "reqCode": "03002002",
              "reqComm": {
                  
              },
              "reqData": {
                "fileInfoList": [
                  { 
                    "fileId": "文件id",
                    "fileUrl": "文件存放url",
                    "fileSeq": "顺序号",
                    "fileType": "文件类型",
                    "isMain": "是否主图片"
                  }
                ]            
              } 
            }
            ```
          </details>
      - <font color="00ffff">response</font>
        ```json
          {
          "respCode": "0000",
          "respMsg": "", 
          "respComm": {
              
          },
          "respBody": {
            "saveResultList": [ // 文件保存结果数组
              {
                "fileId": "文件id",
                "saveResult": "保存结果"
              }
            ]           
          } 
        }
        ```  
        - <details>
            <summary>测试报文</summary>

            ```json
            {
              "respCode": "",
              "respMsg": "",
              "respComm": {

              },
              "respBody": {
                
              }
              
            }
            ```
          </details>
    - <a id="03002003"><font color="ffff00">03002003：文件删除接口</font></a>
      - <font color="00ffff">request</font>
        ```json
        {
          "reqCode": "03002003",
          "reqComm": {
            // 公共请求体
          },
          "reqData": {
            "deleteFileIndexList": [
              { 
                "fileId": "文件存放url",
                "fileSeq": "顺序号",
                "fileType": "文件类型",
                "isMain": "是否主图片"
              }
            ]            
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>

            ```json
            {
              "reqCode": "03002003",
              "reqComm": {
                // 公共返回体
              },
              "reqData": {
                "imgList": [
                  { 
                    "imgId": "id",
                    "imgUrl": "图片url",
                    "imgSeq": "顺序号",
                    "isMain": "是否主图片"
                  }
                ]            
              } 
            }
            ```
          </details>
      - <font color="00ffff">response</font>
        ```json
        {
          "respCode": "03002003",
          "respMsg": "", 
          "respComm": {
              
          },
          "respBody": {
            "deleteResultList": [
              { 
                "fileId": "文件id",
                "deleteResult": "文件删除结果，true-成功，false-失败"
              }
            ]            
          } 
        }
        ```
        - <details>
            <summary>测试报文</summary>

            ```json
            {
              
            }
            ```
          </details>